<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Pixiurge::Display::Humanoid
  
    &mdash; Pixiurge API Documentation
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Pixiurge::Display::Humanoid";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (H)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Pixiurge.html" title="Pixiurge (module)">Pixiurge</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Display.html" title="Pixiurge::Display (module)">Display</a></span></span>
     &raquo; 
    <span class="title">Humanoid</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Pixiurge::Display::Humanoid
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Displayable.html" title="Pixiurge::Displayable (class)">Pixiurge::Displayable</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Displayable.html" title="Pixiurge::Displayable (class)">Pixiurge::Displayable</a></span></li>
          
            <li class="next">Pixiurge::Display::Humanoid</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/pixiurge/displayable/humanoid.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A Humanoid corresponds pretty specifically to The Mana Project&#39;s idea of a humanoid.
It has layers of equipment sprites over a pretty specific base animation.
You can get humanoid spritesheets from Mana Project games (The Mana World,
Evol Online, etc.) and/or from the Liberated Pixel Cup. Check OpenGameArt
for LPC-compatible artwork for more.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div>
  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="HUMANOID_IMAGE_OFFSETS-constant" class="">HUMANOID_IMAGE_OFFSETS =
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div>
      </dt>
      <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='symbol'>:walkcycle</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
  <span class='symbol'>:hurt</span> <span class='op'>=&gt;</span> <span class='int'>36</span><span class='comma'>,</span>
  <span class='symbol'>:slash</span> <span class='op'>=&gt;</span> <span class='int'>42</span><span class='comma'>,</span>
  <span class='symbol'>:spellcast</span> <span class='op'>=&gt;</span> <span class='int'>66</span><span class='comma'>,</span>
  <span class='symbol'>:total</span> <span class='op'>=&gt;</span> <span class='int'>94</span>
<span class='rbrace'>}</span></pre></dd>
    
      <dt id="HUMANOID_BASE_ANIMATION-constant" class="">HUMANOID_BASE_ANIMATION =
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div>
      </dt>
      <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stand_up</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_up</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_up</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stand_left</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>9</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_left</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>10</span><span class='comma'>,</span> <span class='int'>17</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_left</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stand_down</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>18</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_down</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>19</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_down</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stand_right</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>27</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_right</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>28</span><span class='comma'>,</span> <span class='int'>35</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_right</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hurt</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>36</span><span class='comma'>,</span> <span class='int'>41</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hurt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_up</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>42</span><span class='comma'>,</span> <span class='int'>47</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_up</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_left</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>48</span><span class='comma'>,</span> <span class='int'>53</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_left</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_down</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>54</span><span class='comma'>,</span> <span class='int'>59</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_down</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_right</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>60</span><span class='comma'>,</span> <span class='int'>65</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>slash_right</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_up</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>66</span><span class='comma'>,</span> <span class='int'>72</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_up</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_left</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>73</span><span class='comma'>,</span> <span class='int'>79</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_left</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_down</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>80</span><span class='comma'>,</span> <span class='int'>86</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_down</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_right</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>87</span><span class='comma'>,</span> <span class='int'>93</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spellcast_right</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>0.33</span><span class='rbracket'>]</span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
    
  </dl>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#spritesheet-instance_method" title="#spritesheet (instance method)">#<strong>spritesheet</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#spritestack-instance_method" title="#spritestack (instance method)">#<strong>spritestack</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Displayable.html" title="Pixiurge::Displayable (class)">Pixiurge::Displayable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Displayable.html#block_height-instance_method" title="Pixiurge::Displayable#block_height (method)">#block_height</a></span>, <span class='object_link'><a href="../Displayable.html#block_width-instance_method" title="Pixiurge::Displayable#block_width (method)">#block_width</a></span>, <span class='object_link'><a href="../Displayable.html#demi_item-instance_method" title="Pixiurge::Displayable#demi_item (method)">#demi_item</a></span>, <span class='object_link'><a href="../Displayable.html#location_block_height-instance_method" title="Pixiurge::Displayable#location_block_height (method)">#location_block_height</a></span>, <span class='object_link'><a href="../Displayable.html#location_block_width-instance_method" title="Pixiurge::Displayable#location_block_width (method)">#location_block_width</a></span>, <span class='object_link'><a href="../Displayable.html#location_displayable-instance_method" title="Pixiurge::Displayable#location_displayable (method)">#location_displayable</a></span>, <span class='object_link'><a href="../Displayable.html#location_name-instance_method" title="Pixiurge::Displayable#location_name (method)">#location_name</a></span>, <span class='object_link'><a href="../Displayable.html#name-instance_method" title="Pixiurge::Displayable#name (method)">#name</a></span>, <span class='object_link'><a href="../Displayable.html#position-instance_method" title="Pixiurge::Displayable#position (method)">#position</a></span>, <span class='object_link'><a href="../Displayable.html#x-instance_method" title="Pixiurge::Displayable#x (method)">#x</a></span>, <span class='object_link'><a href="../Displayable.html#y-instance_method" title="Pixiurge::Displayable#y (method)">#y</a></span></p>


  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#animation_with_offset-class_method" title="animation_with_offset (class method)">.<strong>animation_with_offset</strong>(prefix, offset)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a humanoid animation, offset by a constant number of frames.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#animation_messages-instance_method" title="#animation_messages (instance method)">#<strong>animation_messages</strong>(anim_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_spritesheet_json-instance_method" title="#build_spritesheet_json (instance method)">#<strong>build_spritesheet_json</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_spritestack_json-instance_method" title="#build_spritestack_json (instance method)">#<strong>build_spritestack_json</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(layers, name:, demi_item:, format: &quot;png&quot;, engine_connector:)  &#x21d2; Humanoid </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Humanoid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#move_for_player-instance_method" title="#move_for_player (instance method)">#<strong>move_for_player</strong>(player, old_position, new_position, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pixel_coords_for_tile-instance_method" title="#pixel_coords_for_tile (instance method)">#<strong>pixel_coords_for_tile</strong>(x, y)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sheet_name-instance_method" title="#sheet_name (instance method)">#<strong>sheet_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stack_name-instance_method" title="#stack_name (instance method)">#<strong>stack_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#walk_to_loc_coords-instance_method" title="#walk_to_loc_coords (instance method)">#<strong>walk_to_loc_coords</strong>(location, x, y, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Calculate messages for animations to move in a line to a tile.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Displayable.html" title="Pixiurge::Displayable (class)">Pixiurge::Displayable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Displayable.html#demiurge_reloaded-instance_method" title="Pixiurge::Displayable#demiurge_reloaded (method)">#demiurge_reloaded</a></span>, <span class='object_link'><a href="../Displayable.html#hide_from_player-instance_method" title="Pixiurge::Displayable#hide_from_player (method)">#hide_from_player</a></span>, <span class='object_link'><a href="../Displayable.html#show_to_player-instance_method" title="Pixiurge::Displayable#show_to_player (method)">#show_to_player</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(layers, name:, demi_item:, format: &quot;png&quot;, engine_connector:)  &#x21d2; <tt><span class='object_link'><a href="" title="Pixiurge::Display::Humanoid (class)">Humanoid</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Humanoid</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span> <span class='id identifier rubyid_layers'>layers</span><span class='comma'>,</span> <span class='label'>name:</span><span class='comma'>,</span> <span class='label'>demi_item:</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>engine_connector:</span>
  <span class='kw'>super</span> <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>demi_item:</span> <span class='id identifier rubyid_demi_item'>demi_item</span><span class='comma'>,</span> <span class='label'>engine_connector:</span> <span class='id identifier rubyid_engine_connector'>engine_connector</span>

  <span class='ivar'>@format</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span>

  <span class='comment'># This idea of layers and specific animations is *very* specific
</span>  <span class='comment'># to ManaSource-style or Liberated-Pixel-Cup-style humanoid
</span>  <span class='comment'># animations.
</span>  <span class='ivar'>@layers</span> <span class='op'>=</span> <span class='id identifier rubyid_layers'>layers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_layer'>layer</span><span class='op'>|</span> <span class='id identifier rubyid_layer'>layer</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='lbrace'>{</span> <span class='label'>name:</span> <span class='id identifier rubyid_layer'>layer</span> <span class='rbrace'>}</span> <span class='op'>:</span> <span class='id identifier rubyid_layer'>layer</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_prev_offset'>prev_offset</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@layers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_layer'>layer</span><span class='op'>|</span>
    <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>  <span class='comment'># No filename? Default to name.
</span>    <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_prev_offset'>prev_offset</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#HUMANOID_IMAGE_OFFSETS-constant" title="Pixiurge::Display::Humanoid::HUMANOID_IMAGE_OFFSETS (constant)">HUMANOID_IMAGE_OFFSETS</a></span></span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_prev_offset'>prev_offset</span> <span class='op'>=</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='ivar'>@spritesheet</span> <span class='op'>=</span> <span class='id identifier rubyid_build_spritesheet_json'>build_spritesheet_json</span>
  <span class='ivar'>@spritestack</span> <span class='op'>=</span> <span class='id identifier rubyid_build_spritestack_json'>build_spritestack_json</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="spritesheet-instance_method">
  
    #<strong>spritesheet</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_spritesheet'>spritesheet</span>
  <span class='ivar'>@spritesheet</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="spritestack-instance_method">
  
    #<strong>spritestack</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_spritestack'>spritestack</span>
  <span class='ivar'>@spritestack</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="animation_with_offset-class_method">
  
    .<strong>animation_with_offset</strong>(prefix, offset)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a humanoid animation, offset by a constant number of frames.
This is used to have, say, multiple body or equipment animations in
the same spritesheet.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231
232
233
234
235
236
237
238
239
240
241
242
243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 229</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_animation_with_offset'>animation_with_offset</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_anim'>anim</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="#HUMANOID_BASE_ANIMATION-constant" title="Pixiurge::Display::Humanoid::HUMANOID_BASE_ANIMATION (constant)">HUMANOID_BASE_ANIMATION</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_anim'>anim</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Fixnum</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_f'>f</span> <span class='op'>+</span> <span class='id identifier rubyid_offset'>offset</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='id identifier rubyid_f'>f</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_f'>f</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_anim'>anim</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="animation_messages-instance_method">
  
    #<strong>animation_messages</strong>(anim_name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_animation_messages'>animation_messages</span> <span class='id identifier rubyid_anim_name'>anim_name</span>
  <span class='comment'># For displayStartAnimation
</span>  <span class='ivar'>@layers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_layer'>layer</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displayStartAnimation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stack</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_stack_name'>stack_name</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>layer</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>anim</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_anim_name'>anim_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='rbrace'>}</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_spritesheet_json-instance_method">
  
    #<strong>build_spritesheet_json</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_spritesheet_json'>build_spritesheet_json</span>
  <span class='id identifier rubyid_images'>images</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='ivar'>@layers</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='lparen'>(</span><span class='ivar'>@layers</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_layer'>layer</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='lbracket'>[</span>
      <span class='lbrace'>{</span>
        <span class='symbol'>:firstgid</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="#HUMANOID_IMAGE_OFFSETS-constant" title="Pixiurge::Display::Humanoid::HUMANOID_IMAGE_OFFSETS (constant)">HUMANOID_IMAGE_OFFSETS</a></span></span><span class='lbracket'>[</span><span class='symbol'>:walkcycle</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:image</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/sprites/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_walkcycle.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:imagewidth</span> <span class='op'>=&gt;</span> <span class='int'>576</span><span class='comma'>,</span>
        <span class='symbol'>:imageheight</span> <span class='op'>=&gt;</span> <span class='int'>256</span><span class='comma'>,</span>
        <span class='symbol'>:tilewidth</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:tileheight</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:reg_x</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='symbol'>:reg_y</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span>  <span class='comment'># This is hardcoded to ManaSource format in an annoyingly specific way... :-(
</span>      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span>
        <span class='symbol'>:firstgid</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="#HUMANOID_IMAGE_OFFSETS-constant" title="Pixiurge::Display::Humanoid::HUMANOID_IMAGE_OFFSETS (constant)">HUMANOID_IMAGE_OFFSETS</a></span></span><span class='lbracket'>[</span><span class='symbol'>:hurt</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:image</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/sprites/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_hurt.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:imagewidth</span> <span class='op'>=&gt;</span> <span class='int'>384</span><span class='comma'>,</span>
        <span class='symbol'>:imageheight</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:tilewidth</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:tileheight</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:reg_x</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='symbol'>:reg_y</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span>
        <span class='symbol'>:firstgid</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="#HUMANOID_IMAGE_OFFSETS-constant" title="Pixiurge::Display::Humanoid::HUMANOID_IMAGE_OFFSETS (constant)">HUMANOID_IMAGE_OFFSETS</a></span></span><span class='lbracket'>[</span><span class='symbol'>:slash</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:image</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/sprites/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_slash.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:imagewidth</span> <span class='op'>=&gt;</span> <span class='int'>384</span><span class='comma'>,</span>
        <span class='symbol'>:imageheight</span> <span class='op'>=&gt;</span> <span class='int'>256</span><span class='comma'>,</span>
        <span class='symbol'>:tilewidth</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:tileheight</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:reg_x</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='symbol'>:reg_y</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span>
        <span class='symbol'>:firstgid</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="#HUMANOID_IMAGE_OFFSETS-constant" title="Pixiurge::Display::Humanoid::HUMANOID_IMAGE_OFFSETS (constant)">HUMANOID_IMAGE_OFFSETS</a></span></span><span class='lbracket'>[</span><span class='symbol'>:spellcast</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:image</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/sprites/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_spellcast.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:imagewidth</span> <span class='op'>=&gt;</span> <span class='int'>448</span><span class='comma'>,</span>
        <span class='symbol'>:imageheight</span> <span class='op'>=&gt;</span> <span class='int'>256</span><span class='comma'>,</span>
        <span class='symbol'>:tilewidth</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:tileheight</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
        <span class='symbol'>:reg_x</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='symbol'>:reg_y</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='lbrace'>{</span>
    <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_sheet_name'>sheet_name</span><span class='comma'>,</span>
    <span class='symbol'>:tilewidth</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
    <span class='symbol'>:tileheight</span> <span class='op'>=&gt;</span> <span class='int'>64</span><span class='comma'>,</span>
    <span class='symbol'>:properties</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='symbol'>:animations</span> <span class='op'>=&gt;</span> <span class='ivar'>@layers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_layer'>layer</span><span class='op'>|</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_animation_with_offset'>animation_with_offset</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbol'>:merge</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='symbol'>:images</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_images'>images</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_spritestack_json-instance_method">
  
    #<strong>build_spritestack_json</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_spritestack_json'>build_spritestack_json</span>
  <span class='id identifier rubyid_layers'>layers</span> <span class='op'>=</span> <span class='ivar'>@layers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_layer'>layer</span><span class='op'>|</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='symbol'>:data</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span> <span class='lbracket'>[</span> <span class='id identifier rubyid_layer'>layer</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#HUMANOID_BASE_ANIMATION-constant" title="Pixiurge::Display::Humanoid::HUMANOID_BASE_ANIMATION (constant)">HUMANOID_BASE_ANIMATION</a></span></span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stand_down</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='rbracket'>]</span> <span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='symbol'>:visible</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
      <span class='symbol'>:opacity</span> <span class='op'>=&gt;</span> <span class='float'>1.0</span><span class='comma'>,</span>
      <span class='symbol'>:z</span> <span class='op'>=&gt;</span> <span class='float'>0.0</span><span class='comma'>,</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='lbrace'>{</span>
    <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_stack_name'>stack_name</span><span class='comma'>,</span>
    <span class='symbol'>:width</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span>
    <span class='symbol'>:height</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span>
    <span class='symbol'>:spritesheet</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_spritesheet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:layers</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_layers'>layers</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="move_for_player-instance_method">
  
    #<strong>move_for_player</strong>(player, old_position, new_position, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_move_for_player'>move_for_player</span><span class='lparen'>(</span><span class='id identifier rubyid_player'>player</span><span class='comma'>,</span> <span class='id identifier rubyid_old_position'>old_position</span><span class='comma'>,</span> <span class='id identifier rubyid_new_position'>new_position</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_old_loc_name'>old_loc_name</span><span class='comma'>,</span> <span class='id identifier rubyid_old_x'>old_x</span><span class='comma'>,</span> <span class='id identifier rubyid_old_y'>old_y</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Demiurge</span><span class='op'>::</span><span class='const'>TmxLocation</span><span class='period'>.</span><span class='id identifier rubyid_position_to_loc_coords'>position_to_loc_coords</span><span class='lparen'>(</span><span class='id identifier rubyid_old_position'>old_position</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_loc_name'>new_loc_name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_x'>new_x</span><span class='comma'>,</span> <span class='id identifier rubyid_new_y'>new_y</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Demiurge</span><span class='op'>::</span><span class='const'>TmxLocation</span><span class='period'>.</span><span class='id identifier rubyid_position_to_loc_coords'>position_to_loc_coords</span><span class='lparen'>(</span><span class='id identifier rubyid_new_position'>new_position</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_x_delta'>x_delta</span> <span class='op'>=</span> <span class='id identifier rubyid_new_x'>new_x</span> <span class='op'>-</span> <span class='id identifier rubyid_old_x'>old_x</span>
  <span class='id identifier rubyid_y_delta'>y_delta</span> <span class='op'>=</span> <span class='id identifier rubyid_new_y'>new_y</span> <span class='op'>-</span> <span class='id identifier rubyid_old_y'>old_y</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_x_delta'>x_delta</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_y_delta'>y_delta</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
    <span class='id identifier rubyid_cur_direction'>cur_direction</span> <span class='op'>=</span> <span class='id identifier rubyid_x_delta'>x_delta</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>right</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>left</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cur_direction'>cur_direction</span> <span class='op'>=</span> <span class='id identifier rubyid_y_delta'>y_delta</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>down</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>up</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>duration</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_time_to_walk'>time_to_walk</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>duration</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_speed'>speed</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>speed</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='float'>1.0</span>
    <span class='id identifier rubyid_distance'>distance</span> <span class='op'>=</span> <span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='id identifier rubyid_x_delta'>x_delta</span> <span class='op'>**</span> <span class='int'>2</span> <span class='op'>+</span> <span class='id identifier rubyid_y_delta'>y_delta</span> <span class='op'>**</span> <span class='int'>2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_time_to_walk'>time_to_walk</span> <span class='op'>=</span> <span class='id identifier rubyid_distance'>distance</span> <span class='op'>/</span> <span class='id identifier rubyid_speed'>speed</span>
  <span class='kw'>end</span>

  <span class='comment'># When in doubt, hardcode w/ ManaSource values...
</span>  <span class='id identifier rubyid_pixel_x'>pixel_x</span> <span class='op'>=</span> <span class='id identifier rubyid_new_x'>new_x</span> <span class='op'>*</span> <span class='int'>32</span>
  <span class='id identifier rubyid_pixel_y'>pixel_y</span> <span class='op'>=</span> <span class='id identifier rubyid_new_y'>new_y</span> <span class='op'>*</span> <span class='int'>32</span>
  <span class='kw'>if</span> <span class='ivar'>@location_spritesheet</span>
    <span class='id identifier rubyid_pixel_x'>pixel_x</span> <span class='op'>=</span> <span class='id identifier rubyid_new_x'>new_x</span> <span class='op'>*</span> <span class='ivar'>@location_spritesheet</span><span class='lbracket'>[</span><span class='symbol'>:tilewidth</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pixel_y'>pixel_y</span> <span class='op'>=</span> <span class='id identifier rubyid_new_y'>new_y</span> <span class='op'>*</span> <span class='ivar'>@location_spritesheet</span><span class='lbracket'>[</span><span class='symbol'>:tileheight</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_animation_messages'>animation_messages</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cur_direction'>cur_direction</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_msg'>msg</span><span class='op'>|</span> <span class='id identifier rubyid_player'>player</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='op'>*</span><span class='id identifier rubyid_msg'>msg</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_player'>player</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displayMoveStackToPixel</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_stack_name'>stack_name</span><span class='comma'>,</span> <span class='id identifier rubyid_pixel_x'>pixel_x</span><span class='comma'>,</span> <span class='id identifier rubyid_pixel_y'>pixel_y</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>duration</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_time_to_walk'>time_to_walk</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pixel_coords_for_tile-instance_method">
  
    #<strong>pixel_coords_for_tile</strong>(x, y)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220
221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pixel_coords_for_tile'>pixel_coords_for_tile</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
  <span class='comment'># When in doubt, hardcode w/ ManaSource values...
</span>  <span class='id identifier rubyid_pixel_x'>pixel_x</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>*</span> <span class='int'>32</span>
  <span class='id identifier rubyid_pixel_y'>pixel_y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>*</span> <span class='int'>32</span>
  <span class='kw'>if</span> <span class='ivar'>@demi_item</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Demiurge</span><span class='op'>::</span><span class='const'>TmxLocation</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_loc_sheet'>loc_sheet</span> <span class='op'>=</span> <span class='ivar'>@demi_item</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_tiles'>tiles</span><span class='lbracket'>[</span><span class='symbol'>:spritesheet</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pixel_x'>pixel_x</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>*</span> <span class='id identifier rubyid_loc_sheet'>loc_sheet</span><span class='lbracket'>[</span><span class='symbol'>:tilewidth</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pixel_y'>pixel_y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>*</span> <span class='id identifier rubyid_loc_sheet'>loc_sheet</span><span class='lbracket'>[</span><span class='symbol'>:tileheight</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_pixel_x'>pixel_x</span><span class='comma'>,</span> <span class='id identifier rubyid_pixel_y'>pixel_y</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sheet_name-instance_method">
  
    #<strong>sheet_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sheet_name'>sheet_name</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_spritesheet</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stack_name-instance_method">
  
    #<strong>stack_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stack_name'>stack_name</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="walk_to_loc_coords-instance_method">
  
    #<strong>walk_to_loc_coords</strong>(location, x, y, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Calculate messages for animations to move in a line to a tile.
Options:
  &quot;speed&quot; - speed to move one tile of distance
  &quot;duration&quot; - duration for entire walk animation (overrides &quot;speed&quot;)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pixiurge/displayable/humanoid.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_walk_to_loc_coords'>walk_to_loc_coords</span><span class='lparen'>(</span><span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_messages'>messages</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_x_delta'>x_delta</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='ivar'>@x</span>
  <span class='id identifier rubyid_y_delta'>y_delta</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='ivar'>@y</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_x_delta'>x_delta</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_y_delta'>y_delta</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
    <span class='id identifier rubyid_cur_direction'>cur_direction</span> <span class='op'>=</span> <span class='id identifier rubyid_x_delta'>x_delta</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>right</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>left</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cur_direction'>cur_direction</span> <span class='op'>=</span> <span class='id identifier rubyid_y_delta'>y_delta</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>down</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>up</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>duration</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_time_to_walk'>time_to_walk</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>duration</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_speed'>speed</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>speed</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='float'>1.0</span>
    <span class='id identifier rubyid_distance'>distance</span> <span class='op'>=</span> <span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='id identifier rubyid_x_delta'>x_delta</span> <span class='op'>**</span> <span class='int'>2</span> <span class='op'>+</span> <span class='id identifier rubyid_y_delta'>y_delta</span> <span class='op'>**</span> <span class='int'>2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_time_to_walk'>time_to_walk</span> <span class='op'>=</span> <span class='id identifier rubyid_distance'>distance</span> <span class='op'>/</span> <span class='id identifier rubyid_speed'>speed</span>
  <span class='kw'>end</span>

  <span class='comment'># When in doubt, hardcode w/ ManaSource values...
</span>  <span class='id identifier rubyid_pixel_x'>pixel_x</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>*</span> <span class='int'>32</span>
  <span class='id identifier rubyid_pixel_y'>pixel_y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>*</span> <span class='int'>32</span>
  <span class='kw'>if</span> <span class='ivar'>@demi_item</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Demiurge</span><span class='op'>::</span><span class='const'>TmxLocation</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_loc_sheet'>loc_sheet</span> <span class='op'>=</span> <span class='ivar'>@demi_item</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_tiles'>tiles</span><span class='lbracket'>[</span><span class='symbol'>:spritesheet</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pixel_x'>pixel_x</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>*</span> <span class='id identifier rubyid_loc_sheet'>loc_sheet</span><span class='lbracket'>[</span><span class='symbol'>:tilewidth</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pixel_y'>pixel_y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>*</span> <span class='id identifier rubyid_loc_sheet'>loc_sheet</span><span class='lbracket'>[</span><span class='symbol'>:tileheight</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_messages'>messages</span> <span class='op'>+=</span> <span class='id identifier rubyid_animation_messages'>animation_messages</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walk_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cur_direction'>cur_direction</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_messages'>messages</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displayMoveStackToPixel</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_stack_name'>stack_name</span><span class='comma'>,</span> <span class='id identifier rubyid_pixel_x'>pixel_x</span><span class='comma'>,</span> <span class='id identifier rubyid_pixel_y'>pixel_y</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>duration</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_time_to_walk'>time_to_walk</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span>

  <span class='ivar'>@location</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span>
  <span class='ivar'>@x</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span>
  <span class='ivar'>@y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span>

  <span class='id identifier rubyid_messages'>messages</span>
  <span class='comment'>#EM.add_timer(time_to_walk) do
</span>  <span class='comment'>#  # Still walking as a result of this call? If so, now stop.
</span>  <span class='comment'>#  if @anim_counter == cur_anim_counter
</span>  <span class='comment'>#    send_animation &quot;stand_#{cur_direction}&quot;
</span>  <span class='comment'>#  end
</span>  <span class='comment'>#end
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan 16 12:25:03 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>