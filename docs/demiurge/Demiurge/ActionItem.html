<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Demiurge::ActionItem
  
    &mdash; Demiurge API Documentation
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Demiurge::ActionItem";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Demiurge.html" title="Demiurge (module)">Demiurge</a></span></span>
     &raquo; 
    <span class="title">ActionItem</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Demiurge::ActionItem
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">StateItem</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">StateItem</a></span></li>
          
            <li class="next">Demiurge::ActionItem</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/demiurge/action_item.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A Demiurge::ActionItem keeps track of actions from Ruby code
blocks and implements the Demiurge DSL for action code, including
inside World Files.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Agent.html" title="Demiurge::Agent (class)">Agent</a></span>, <span class='object_link'><a href="Container.html" title="Demiurge::Container (class)">Container</a></span></p>
</div>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="ACTION_LEGAL_KEYS-constant" class="">ACTION_LEGAL_KEYS =
        <div class="docstring">
  <div class="discussion">
    <p>Legal keys to pass to ActionItem#register_actions&#39; hash</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div>
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>block</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>busy</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>engine_code</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tags</span><span class='tstring_end'>&quot;</span></span> <span class='rbracket'>]</span></pre></dd>
    
  </dl>






  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">StateItem</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="StateItem.html#engine-instance_method" title="Demiurge::StateItem#engine (method)">#engine</a></span>, <span class='object_link'><a href="StateItem.html#name-instance_method" title="Demiurge::StateItem#name (method)">#name</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#__state_internal-instance_method" title="#__state_internal (instance method)">#<strong>__state_internal</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>An internal function that provides the object&#39;s internal state to an action block via a Runner class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finished_init-instance_method" title="#finished_init (instance method)">#<strong>finished_init</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Callback to be called from the Engine when all items are loaded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_action-instance_method" title="#get_action (instance method)">#<strong>get_action</strong>(action_name)  &#x21d2; Hash<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the action hash structure for a given action name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_actions_with_tags-instance_method" title="#get_actions_with_tags (instance method)">#<strong>get_actions_with_tags</strong>(tags)  &#x21d2; Array&lt;Hash&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return all actions which have the given String tags specified for them.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(name, engine, state)  &#x21d2; void </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Constructor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#intentions_for_next_step-instance_method" title="#intentions_for_next_step (instance method)">#<strong>intentions_for_next_step</strong>  &#x21d2; Array&lt;Demiurge::Intention&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get this item&#39;s intentions for the next tick.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#location-instance_method" title="#location (instance method)">#<strong>location</strong>  &#x21d2; Demiurge::StateItem<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the location StateItem where this item is located.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#location_name-instance_method" title="#location_name (instance method)">#<strong>location_name</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the name of this item&#39;s location.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#position-instance_method" title="#position (instance method)">#<strong>position</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A Position can be simply a location (&quot;here&#39;s a room-type object and you&#39;re in it&quot;) or something more specific, such as a specific coordinate within a room.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_actions-instance_method" title="#register_actions (instance method)">#<strong>register_actions</strong>(action_hash)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This method is called by (among other things) define_action to specify things about an action.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_action-instance_method" title="#run_action (instance method)">#<strong>run_action</strong>(action_name, *args, current_intention: nil)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This is a raw, low-level way to execute an action of an ActionItem.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zone-instance_method" title="#zone (instance method)">#<strong>zone</strong>  &#x21d2; StateItem<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the StateItem of the Zone where this item is located.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zone_name-instance_method" title="#zone_name (instance method)">#<strong>zone_name</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the Zone name for this StateItem&#39;s current location, which may be different from its &quot;home&quot; Zone.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">StateItem</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="StateItem.html#agent%3F-instance_method" title="Demiurge::StateItem#agent? (method)">#agent?</a></span>, <span class='object_link'><a href="StateItem.html#from_name_type-class_method" title="Demiurge::StateItem.from_name_type (method)">from_name_type</a></span>, <span class='object_link'><a href="StateItem.html#get_structure-instance_method" title="Demiurge::StateItem#get_structure (method)">#get_structure</a></span>, <span class='object_link'><a href="StateItem.html#state-instance_method" title="Demiurge::StateItem#state (method)">#state</a></span>, <span class='object_link'><a href="StateItem.html#state_type-instance_method" title="Demiurge::StateItem#state_type (method)">#state_type</a></span>, <span class='object_link'><a href="StateItem.html#zone%3F-instance_method" title="Demiurge::StateItem#zone? (method)">#zone?</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(name, engine, state)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Constructor. Set up ActionItem-specific things like EveryXTicks actions.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The registered StateItem name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>engine</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Engine.html" title="Demiurge::Engine (class)">Demiurge::Engine</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Engine this item is part of</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The state hash for this item</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_engine'>engine</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='kw'>super</span> <span class='comment'># Set @name and @engine and @state
</span>  <span class='ivar'>@every_x_ticks_intention</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ActionItemInternal.html" title="Demiurge::ActionItemInternal (module)">ActionItemInternal</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ActionItemInternal/EveryXTicksIntention.html" title="Demiurge::ActionItemInternal::EveryXTicksIntention (class)">EveryXTicksIntention</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ActionItemInternal/EveryXTicksIntention.html#initialize-instance_method" title="Demiurge::ActionItemInternal::EveryXTicksIntention#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_engine'>engine</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="__state_internal-instance_method">
  
    #<strong>__state_internal</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>An internal function that provides the object&#39;s internal state
to an action block via a Runner class.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The internal state of this item for use in DSL action blocks</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid___state_internal'>__state_internal</span>
  <span class='ivar'>@state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="finished_init-instance_method">
  
    #<strong>finished_init</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Callback to be called from the Engine when all items are loaded.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_finished_init'>finished_init</span>
  <span class='id identifier rubyid_loc'>loc</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span>
  <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_move_item_inside'>move_item_inside</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_action-instance_method">
  
    #<strong>get_action</strong>(action_name)  &#x21d2; <tt>Hash</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the action hash structure for a given action name. This is
normally done to verify that a specific action name exists at
all.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>action_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The action name to query</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash of information about the action, or nil if the action doesn&#39;t exist</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183
184
185
186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_action'>get_action</span><span class='lparen'>(</span><span class='id identifier rubyid_action_name'>action_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_action'>action</span> <span class='op'>=</span> <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_action_for_item'>action_for_item</span><span class='lparen'>(</span><span class='ivar'>@name</span><span class='comma'>,</span> <span class='id identifier rubyid_action_name'>action_name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_action'>action</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_state'>state</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='comment'># Do we have a parent and no action definition yet? If so, defer to the parent.
</span>    <span class='id identifier rubyid_action'>action</span> <span class='op'>=</span> <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_item_by_name'>item_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_get_action'>get_action</span><span class='lparen'>(</span><span class='id identifier rubyid_action_name'>action_name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_action'>action</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_actions_with_tags-instance_method">
  
    #<strong>get_actions_with_tags</strong>(tags)  &#x21d2; <tt>Array&lt;Hash&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return all actions which have the given String tags specified for them.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of tags the returned actions should match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Hash&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of action structures. The &quot;name&quot; field of each gives the action name</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199
200
201
202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_actions_with_tags'>get_actions_with_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tags'>tags</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_tags'>tags</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Allow calling with a single tag string
</span>  <span class='ivar'>@actions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_actions_for_item'>actions_for_item</span><span class='lparen'>(</span><span class='ivar'>@name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_action_name'>action_name</span><span class='comma'>,</span> <span class='id identifier rubyid_action_struct'>action_struct</span><span class='op'>|</span>
    <span class='comment'># I&#39;m sure there&#39;s some more clever way to check if the action contains all these tags...
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_tags'>tags</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_action_struct'>action_struct</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tags</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='ivar'>@actions</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_action_struct'>action_struct</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@actions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="intentions_for_next_step-instance_method">
  
    #<strong>intentions_for_next_step</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Intention.html" title="Demiurge::Intention (class)">Demiurge::Intention</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get this item&#39;s intentions for the next tick.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Intention.html" title="Demiurge::Intention (class)">Demiurge::Intention</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of intentions for next tick</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_intentions_for_next_step'>intentions_for_next_step</span>
  <span class='id identifier rubyid_everies'>everies</span> <span class='op'>=</span> <span class='ivar'>@state</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>everies</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_everies'>everies</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_everies'>everies</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='lbracket'>[</span><span class='ivar'>@every_x_ticks_intention</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="location-instance_method">
  
    #<strong>location</strong>  &#x21d2; <tt><span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">Demiurge::StateItem</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the location StateItem where this item is located.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">Demiurge::StateItem</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The location&#39;s StateItem, or nil if this item has no location</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_location'>location</span>
  <span class='id identifier rubyid_ln'>ln</span> <span class='op'>=</span> <span class='id identifier rubyid_location_name'>location_name</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_ln'>ln</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_ln'>ln</span> <span class='op'>==</span> <span class='kw'>nil</span>
  <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_item_by_name'>item_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_location_name'>location_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="location_name-instance_method">
  
    #<strong>location_name</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the name of this item&#39;s location. This is compatible with
complex positions, and removes any sub-location suffix, if there
is one.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The location name where this item exists, or nil if it has no location</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_location_name'>location_name</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='ivar'>@state</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>?</span> <span class='id identifier rubyid_pos'>pos</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="position-instance_method">
  
    #<strong>position</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A Position can be simply a location (&quot;here&#39;s a room-type object
and you&#39;re in it&quot;) or something more specific, such as a
specific coordinate within a room. In general, a Position
consists of a location&#39;s unique item name, optionally followed
by an optional pound sign (&quot;#&quot;) and zone-specific additional
coordinates.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>This item&#39;s position, or nil if it has no location.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_position'>position</span>
  <span class='ivar'>@state</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_actions-instance_method">
  
    #<strong>register_actions</strong>(action_hash)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>This method is called by (among other things) define_action to
specify things about an action.  It&#39;s how to specify the
action&#39;s code, how busy it makes an agent when it occurs, what
Runner to use with it, and any appropriate String tags. While it
can be called multiple times to specify different things about a
single action, it must not be called with the same information.
So the block can only be specified once, &quot;busy&quot; can only be
specified once and so on.</p>

<p>This means that if an action&#39;s block is given implicitly by
something like an every_X_ticks declaration, it can use
define_action to set &quot;busy&quot; or &quot;engine_code&quot;. But it can&#39;t
define a different block of code to run with define_action.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>action_hash</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Specify something or everything about an action by its name.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>action_hash</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The name of the action, which is required.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">block</span>
          <span class="type">(<tt>Proc</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The block of code for the action itself</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_actions'>register_actions</span><span class='lparen'>(</span><span class='id identifier rubyid_action_hash'>action_hash</span><span class='rparen'>)</span>
  <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_register_actions_by_item_and_action_name'>register_actions_by_item_and_action_name</span><span class='lparen'>(</span><span class='ivar'>@name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_action_hash'>action_hash</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run_action-instance_method">
  
    #<strong>run_action</strong>(action_name, *args, current_intention: nil)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>This is a raw, low-level way to execute an action of an
ActionItem. It doesn&#39;t wait for Intentions.  It doesn&#39;t send
extra notifications. It doesn&#39;t offer or give a chance to cancel
the action.  It just runs.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>action_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the action to run. Must already be registered.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional arguments to pass to the action&#39;s code block</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>current_intention</span>
      
      
        <span class='type'>(<tt>nil</tt>, <tt><span class='object_link'><a href="Intention.html" title="Demiurge::Intention (class)">Intention</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Current intention being executed, if any. This is used for to cancel an intention, if necessary</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/NoSuchActionError.html" title="Demiurge::Errors::NoSuchActionError (class)">::Demiurge::Errors::NoSuchActionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_action'>run_action</span><span class='lparen'>(</span><span class='id identifier rubyid_action_name'>action_name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>current_intention:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_action'>action</span> <span class='op'>=</span> <span class='id identifier rubyid_get_action'>get_action</span><span class='lparen'>(</span><span class='id identifier rubyid_action_name'>action_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../Demiurge.html" title="Demiurge (module)">Demiurge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors.html" title="Demiurge::Errors (module)">Errors</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors/NoSuchActionError.html" title="Demiurge::Errors::NoSuchActionError (class)">NoSuchActionError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Errors/Exception.html#initialize-instance_method" title="Demiurge::Errors::Exception#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such action as </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_action_name'>action_name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>item</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_action_name'>action_name</span><span class='comma'>,</span>
                                                  <span class='label'>execution_context:</span> <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_execution_context'>execution_context</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_action'>action</span>
  <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='id identifier rubyid_action'>action</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>block</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../Demiurge.html" title="Demiurge (module)">Demiurge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors.html" title="Demiurge::Errors (module)">Errors</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors/NoSuchActionError.html" title="Demiurge::Errors::NoSuchActionError (class)">NoSuchActionError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Errors/Exception.html#initialize-instance_method" title="Demiurge::Errors::Exception#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Action was never defined for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_action_name'>action_name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> of object </span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>item</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_action_name'>action_name</span><span class='comma'>,</span>
                                                  <span class='label'>execution_context:</span> <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_execution_context'>execution_context</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block'>block</span>

  <span class='id identifier rubyid_runner_constructor_args'>runner_constructor_args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_action'>action</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>engine_code</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_block_runner_type'>block_runner_type</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ActionItemInternal.html" title="Demiurge::ActionItemInternal (module)">ActionItemInternal</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ActionItemInternal/EngineBlockRunner.html" title="Demiurge::ActionItemInternal::EngineBlockRunner (class)">EngineBlockRunner</a></span></span>
  <span class='kw'>elsif</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_agent?'>agent?</span>
    <span class='id identifier rubyid_block_runner_type'>block_runner_type</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ActionItemInternal.html" title="Demiurge::ActionItemInternal (module)">ActionItemInternal</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ActionItemInternal/AgentBlockRunner.html" title="Demiurge::ActionItemInternal::AgentBlockRunner (class)">AgentBlockRunner</a></span></span>
    <span class='id identifier rubyid_runner_constructor_args'>runner_constructor_args</span><span class='lbracket'>[</span><span class='symbol'>:current_intention</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_current_intention'>current_intention</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_block_runner_type'>block_runner_type</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ActionItemInternal.html" title="Demiurge::ActionItemInternal (module)">ActionItemInternal</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ActionItemInternal/ActionItemBlockRunner.html" title="Demiurge::ActionItemInternal::ActionItemBlockRunner (class)">ActionItemBlockRunner</a></span></span>
    <span class='id identifier rubyid_runner_constructor_args'>runner_constructor_args</span><span class='lbracket'>[</span><span class='symbol'>:current_intention</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_current_intention'>current_intention</span>
  <span class='kw'>end</span>
  <span class='comment'># TODO: can we save block runners between actions?
</span>  <span class='id identifier rubyid_block_runner'>block_runner</span> <span class='op'>=</span> <span class='id identifier rubyid_block_runner_type'>block_runner_type</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_runner_constructor_args'>runner_constructor_args</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_push_context'>push_context</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>running_action</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_action_name'>action_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>running_action_item</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='ivar'>@name</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_block_runner'>block_runner</span><span class='period'>.</span><span class='id identifier rubyid_instance_exec'>instance_exec</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span>
    <span class='comment'>#STDERR.puts &quot;#{$!.message}\n#{$!.backtrace.join(&quot;\n&quot;)}&quot;
</span>    <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../Demiurge.html" title="Demiurge (module)">Demiurge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors.html" title="Demiurge::Errors (module)">Errors</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors/BadScriptError.html" title="Demiurge::Errors::BadScriptError (class)">BadScriptError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Errors/Exception.html#initialize-instance_method" title="Demiurge::Errors::Exception#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Script error of type </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> with message: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                                 <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>runner type</span><span class='label_end'>&quot;:</span> <span class='id identifier rubyid_block_runner_type'>block_runner_type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_action_name'>action_name</span><span class='comma'>,</span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                                 <span class='label'>execution_context:</span> <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_execution_context'>execution_context</span><span class='rparen'>)</span><span class='semicolon'>;</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zone-instance_method">
  
    #<strong>zone</strong>  &#x21d2; <tt><span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">StateItem</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the StateItem of the Zone where this item is located. This
may be different from its &quot;home&quot; Zone.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="StateItem.html" title="Demiurge::StateItem (class)">StateItem</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>This item&#39;s Zone&#39;s StateItem, or nil in the very unusual case that it has no current Zone.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_zone'>zone</span>
  <span class='id identifier rubyid_zn'>zn</span> <span class='op'>=</span> <span class='id identifier rubyid_zone_name'>zone_name</span>
  <span class='id identifier rubyid_zn'>zn</span> <span class='op'>?</span> <span class='ivar'>@engine</span><span class='period'>.</span><span class='id identifier rubyid_item_by_name'>item_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_zn'>zn</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zone_name-instance_method">
  
    #<strong>zone_name</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the Zone name for this StateItem&#39;s current location, which
may be different from its &quot;home&quot; Zone.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>This item&#39;s Zone&#39;s name, or nil in the very unusual case that it has no current Zone.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/demiurge/action_item.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_zone_name'>zone_name</span>
  <span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span>
  <span class='id identifier rubyid_l'>l</span> <span class='op'>?</span> <span class='id identifier rubyid_l'>l</span><span class='period'>.</span><span class='id identifier rubyid_zone_name'>zone_name</span> <span class='op'>:</span> <span class='id identifier rubyid_state'>state</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>zone</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jun 11 16:00:10 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.5.0).
</div>

    </div>
  </body>
</html>